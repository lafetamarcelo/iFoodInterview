

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>utils package &mdash; iFood Interview Project</title>
  

  
  
    <link rel="shortcut icon" href="_static/iFoodLogo.ico"/>
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="https://twemoji.maxcdn.com/v/latest/twemoji.min.js"></script>
        <script src="_static/twemoji.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
        <script type="text/x-mathjax-config">MathJax.Hub.Config({"tex2jax": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true, "ignoreClass": "document", "processClass": "math|output_area"}})</script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
  <link rel="stylesheet" href="_static/twemoji.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Docs - APIs" href="modules.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> iFoodProject
          

          
            
            <img src="_static/EuMesmo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Analysis:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Clustering code.html">Data analysis for clustering</a></li>
</ul>
<p class="caption"><span class="caption-text">Practical Classifier:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="XGBoost Simple Classifier.html">XGBoost Classifier</a></li>
</ul>
<p class="caption"><span class="caption-text">Other Classifiers:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Deep Networks.html">Deep Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="Support Vector Machines.html">Support Vector Machine</a></li>
</ul>
<p class="caption"><span class="caption-text">Poor attempts:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="Kohonen Maps.html">Kohonen Maps</a></li>
</ul>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="modules.html">Docs - APIs</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">utils package</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#module-utils.support">Support module</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-utils">Module contents</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">iFoodProject</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="modules.html">Docs - APIs</a> &raquo;</li>
        
      <li>utils package</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/utils.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  
<style>
/* CSS overrides for sphinx_rtd_theme */

/* 24px margin */
.nbinput.nblast.container,
.nboutput.nblast.container {
    margin-bottom: 19px;  /* padding has already 5px */
}

/* ... except between code cells! */
.nblast.container + .nbinput.container {
    margin-top: -19px;
}

.admonition > p:before {
    margin-right: 4px;  /* make room for the exclamation icon */
}

/* Fix math alignment, see https://github.com/rtfd/sphinx_rtd_theme/pull/686 */
.math {
    text-align: unset;
}
</style>
<div class="section" id="utils-package">
<h1>utils package<a class="headerlink" href="#utils-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-utils.support">
<span id="support-module"></span><h2>Support module<a class="headerlink" href="#module-utils.support" title="Permalink to this headline">¶</a></h2>
<p>This module synthesizes some of the functions using on the major algorithms of this 
project, as a way to keep the main code as clean as possible for analysis. And here
the APIs for each one of this functions is presented.</p>
<dl class="function">
<dt id="utils.support.balanceDataSet">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">balanceDataSet</code><span class="sig-paren">(</span><em class="sig-param">phi</em>, <em class="sig-param">y</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.balanceDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will receive an output wise unbalaced regression
model in the format</p>
<div class="math notranslate nohighlight">
\[y(k) = f(\phi(k), \Theta )\]</div>
<p>and will return a balanced dataset with randomized samples by
considering the True label of the output as a reference. If 
one wants to use the False label as reference, it is just 
necessary to pass the version of the output.</p>
<p>The balanced database means a database with 50% of true targets,
and 50% of false targets. This is interesting to remove bias of 
upper/lower cut learning of the models.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>phi</strong> (<em>numpy.ndarray</em>) – The regressor matrix.</p></li>
<li><p><strong>y</strong> (<em>numpy.ndarray</em>) – The targets vector.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The new regression model =&gt; (phi, target)</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.support.dropNonInformative">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">dropNonInformative</code><span class="sig-paren">(</span><em class="sig-param">dataset=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.dropNonInformative" title="Permalink to this definition">¶</a></dt>
<dd><p>This function search for inconsistency and stationarity inside
the dataset, and then remove those informations from the dataset.
It returns a dataset without features that does not provide any 
interesting information… It also removes some</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Notice that the dataset description has only 25 fields, but
the table has 29 features… Probably some of those does not 
have any information at all.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>pandas.DataFrame</em>) – The dataset table as dataframe</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dataset with all non informative data dropped</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.support.encodeDataSet">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">encodeDataSet</code><span class="sig-paren">(</span><em class="sig-param">dataset=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.encodeDataSet" title="Permalink to this definition">¶</a></dt>
<dd><p>This function endodes the dataset into only numeric fields 
for machine learning purpose. Returning the numerical dataset,
with the encoders responsible for the transformation.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>pandas.DataFrame</em>) – The dataset table as dataframe</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dataset with all categorical fields numerrically encoded together with a dictionary of each field encoder</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame, dict</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.support.replaceFields">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">replaceFields</code><span class="sig-paren">(</span><em class="sig-param">dataset=None</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.replaceFields" title="Permalink to this definition">¶</a></dt>
<dd><p>This function is responsible to replace some data features
with ones that are more suitable considering the analysis 
porpuse, such as:</p>
<ul class="simple">
<li><p>Birth Year =&gt; Age in years (int)</p></li>
<li><p>Dt Customer =&gt; Persistance in months (int)</p></li>
</ul>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>pandas.DataFrame</em>) – The dataset table as dataframe</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The dataset with some fields preprocessed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.support.svmCostFunction">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">svmCostFunction</code><span class="sig-paren">(</span><em class="sig-param">p</em>, <em class="sig-param">yt</em>, <em class="sig-param">xt</em>, <em class="sig-param">yv</em>, <em class="sig-param">xv</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.svmCostFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>The cost function responsible to build a model with the provided set of 
parameters, then estimate the model, and test its result in the testing 
dataset. To then retrieve a performance indicator that will be the 
reference for the optimization algorithm to minimize.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> (<em>list</em>) – The set of hyper parameters candidates.</p></li>
<li><p><strong>yt</strong> (<em>numpy.ndarray</em>) – The train targets.</p></li>
<li><p><strong>xt</strong> (<em>numpy.ndarray</em>) – The train features.</p></li>
<li><p><strong>yv</strong> (<em>numpy.ndarray</em>) – The test targets.</p></li>
<li><p><strong>xv</strong> (<em>numpy.ndarray</em>) – The test features.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The sum of the false positive indicators from the confusion matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.support.svmHyperGridSearch">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">svmHyperGridSearch</code><span class="sig-paren">(</span><em class="sig-param">bounds</em>, <em class="sig-param">data</em>, <em class="sig-param">iters=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.svmHyperGridSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will run the annealing stochastic optimization algorithm
based on the svmCostFunction, to find the best set of hyper parameters
for the SVC classifier from sklearn, by minimizing the svmCostFunction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>list</em>) – The upper and lower bounds of each parameter.</p></li>
<li><p><strong>data</strong> (<em>list</em>) – The list of datasets that will be used in the svmCostFunction.</p></li>
<li><p><strong>iters</strong> (<em>int</em>) – The number of maximun iterations on the annealing search.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The resulted parameters and the optimization summary, respectivelly.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.support.xgbCostFunction">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">xgbCostFunction</code><span class="sig-paren">(</span><em class="sig-param">p</em>, <em class="sig-param">yt</em>, <em class="sig-param">xt</em>, <em class="sig-param">yv</em>, <em class="sig-param">xv</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.xgbCostFunction" title="Permalink to this definition">¶</a></dt>
<dd><p>The cost function responsible to build a model with the provided set of 
parameters, then estimate the model, and test its result in the testing 
dataset. To then retrieve a performance indicator that will be the 
reference for the optimization algorithm to minimize.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>p</strong> (<em>list</em>) – The set of hyper parameters candidates.</p></li>
<li><p><strong>yt</strong> (<em>numpy.ndarray</em>) – The train targets.</p></li>
<li><p><strong>xt</strong> (<em>numpy.ndarray</em>) – The train features.</p></li>
<li><p><strong>yv</strong> (<em>numpy.ndarray</em>) – The test targets.</p></li>
<li><p><strong>xv</strong> (<em>numpy.ndarray</em>) – The test features.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The sum of the false positive indicators from the confusion matrix.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>float</p>
</dd>
</dl>
</dd></dl>

<dl class="function">
<dt id="utils.support.xgbHyperGridSearch">
<code class="sig-prename descclassname">utils.support.</code><code class="sig-name descname">xgbHyperGridSearch</code><span class="sig-paren">(</span><em class="sig-param">bounds</em>, <em class="sig-param">data</em>, <em class="sig-param">iters=1000</em><span class="sig-paren">)</span><a class="headerlink" href="#utils.support.xgbHyperGridSearch" title="Permalink to this definition">¶</a></dt>
<dd><p>This function will run the annealing stochastic optimization algorithm
based on the xgbCostFunction, to find the best set of hyper parameters
for the XGBoost classifier, by minimizing the xgbCostFunction.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>bounds</strong> (<em>list</em>) – The upper and lower bounds of each parameter.</p></li>
<li><p><strong>data</strong> (<em>list</em>) – The list of datasets that will be used in the xgbCostFunction.</p></li>
<li><p><strong>iters</strong> (<em>int</em>) – The number of maximun iterations on the annealing search.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The resulted parameters and the optimization summary, respectivelly.</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>tuple</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-utils">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-utils" title="Permalink to this headline">¶</a></h2>
<dl class="field-list simple">
<dt class="field-odd">copyright</dt>
<dd class="field-odd"><p>2020 Marcelo Lima</p>
</dd>
<dt class="field-even">license</dt>
<dd class="field-even"><p>BSD-3-Clause</p>
</dd>
</dl>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="modules.html" class="btn btn-neutral float-left" title="Docs - APIs" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2020, Marcelo Lima

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>